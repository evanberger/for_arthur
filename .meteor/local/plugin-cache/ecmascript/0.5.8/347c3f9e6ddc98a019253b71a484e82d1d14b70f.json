{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault","interopRequireWildcard"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"React"}]},{"source":"react-dom","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ReactDOM"}]},{"source":"d3","imported":["*"],"specifiers":[{"kind":"namespace","local":"d3"}]},{"source":"topojson","imported":["*"],"specifiers":[{"kind":"namespace","local":"topojson"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/ui/components/common/map.js","filenameRelative":"/imports/ui/components/common/map.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false,"spec":false}],[[],null],[[],null],[[],{"spec":false}],[[],null],[[],{"loose":false}],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"loose":false}],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],null],[[],{"loose":false}],[[],null],[[],null],[[],{"loose":false}],[[],{"async":false,"asyncGenerators":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/ui/components/common/map.js.map","sourceFileName":"/imports/ui/components/common/map.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"map"},"ignored":false,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _d = require('d3');\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _topojson = require('topojson');\n\nvar topojson = _interopRequireWildcard(_topojson);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in meteorBabelHelpers.sanitizeForInObject(obj)) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar Map = function (_React$Component) {\n  (0, _inherits3['default'])(Map, _React$Component);\n\n  function Map(props) {\n    (0, _classCallCheck3['default'])(this, Map);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, (Map.__proto__ || Object.getPrototypeOf(Map)).call(this, props));\n\n    _this.el = null;\n    _this.width = 960;\n    _this.height = 500;\n    _this.loadStates = _this.loadStates.bind(_this);\n    _this.projection = d3.geoAlbersUsa().translate([_this.width / 2, _this.height / 2]).scale([1000]);\n    _this.path = d3.geoPath().projection(_this.projection);\n    return _this;\n  }\n\n  (0, _createClass3['default'])(Map, [{\n    key: 'componentDidMount',\n    value: function () {\n      function componentDidMount() {\n        this.initMap();\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: 'loadStates',\n    value: function () {\n      function loadStates(error, us) {\n        if (error) throw error;\n\n        this.svg.insert(\"path\", \".buildings\").datum(topojson.feature(us, us.objects.land)).attr(\"class\", \"land\").attr(\"d\", this.path);\n\n        this.svg.insert(\"path\", \".buildings\").datum(topojson.mesh(us, us.objects.states, function (a, b) {\n          return a !== b;\n        })).attr(\"class\", \"state-boundary\").attr(\"d\", this.path);\n      }\n\n      return loadStates;\n    }()\n  }, {\n    key: 'initMap',\n    value: function () {\n      function initMap() {\n        var width = this.width;\n        var height = this.height;\n        var projection = this.projection;\n        var path = this.path;\n\n        this.el = _reactDom2['default'].findDOMNode(this);\n\n        //Create SVG element and append map to the SVG\n        this.svg = d3.select(this.el).append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n\n        d3.json(\"/us.json\", this.loadStates);\n      }\n\n      return initMap;\n    }()\n  }, {\n    key: 'render',\n    value: function () {\n      function render() {\n        return _react2['default'].createElement('div', { className: 'buildings' });\n      }\n\n      return render;\n    }()\n  }]);\n  return Map;\n}(_react2['default'].Component);\n\n;\n\nexports['default'] = Map;","ast":null,"map":{"version":3,"sources":["/imports/ui/components/common/map.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;IAAY,E;;AACZ;;IAAY,Q;;;;;;IAEN,G;;;AACJ,eAAY,KAAZ,EAAmB;AAAA;;AAAA,2HACX,KADW;;AAGjB,UAAK,EAAL,GAAU,IAAV;AACA,UAAK,KAAL,GAAa,GAAb;AACA,UAAK,MAAL,GAAc,GAAd;AACA,UAAK,UAAL,GAAkB,MAAK,UAAL,CAAgB,IAAhB,OAAlB;AACA,UAAK,UAAL,GAAkB,GAAG,YAAH,GACf,SADe,CACL,CAAC,MAAK,KAAL,GAAa,CAAd,EAAiB,MAAK,MAAL,GAAc,CAA/B,CADK,EAEf,KAFe,CAET,CAAC,IAAD,CAFS,CAAlB;AAGA,UAAK,IAAL,GAAY,GAAG,OAAH,GACT,UADS,CACE,MAAK,UADP,CAAZ;AAViB;AAYlB;;;;;mCAEmB;AAClB,aAAK,OAAL;AACD;;;;;;;0BAEU,K,EAAO,E,EAAI;AACpB,YAAI,KAAJ,EAAW,MAAM,KAAN;;AAEX,aAAK,GAAL,CAAS,MAAT,CAAgB,MAAhB,EAAwB,YAAxB,EACK,KADL,CACW,SAAS,OAAT,CAAiB,EAAjB,EAAqB,GAAG,OAAH,CAAW,IAAhC,CADX,EAEK,IAFL,CAEU,OAFV,EAEmB,MAFnB,EAGK,IAHL,CAGU,GAHV,EAGe,KAAK,IAHpB;;AAKA,aAAK,GAAL,CAAS,MAAT,CAAgB,MAAhB,EAAwB,YAAxB,EACK,KADL,CACW,SAAS,IAAT,CAAc,EAAd,EAAkB,GAAG,OAAH,CAAW,MAA7B,EAAqC,UAAS,CAAT,EAAY,CAAZ,EAAe;AAAE,iBAAO,MAAM,CAAb;AAAiB,SAAvE,CADX,EAEK,IAFL,CAEU,OAFV,EAEmB,gBAFnB,EAGK,IAHL,CAGU,GAHV,EAGe,KAAK,IAHpB;AAID;;;;;;;yBAES;AAAA,YACD,KADC,GACkC,IADlC,CACD,KADC;AAAA,YACM,MADN,GACkC,IADlC,CACM,MADN;AAAA,YACc,UADd,GACkC,IADlC,CACc,UADd;AAAA,YAC0B,IAD1B,GACkC,IADlC,CAC0B,IAD1B;;AAER,aAAK,EAAL,GAAU,sBAAS,WAAT,CAAqB,IAArB,CAAV;;;AAGA,aAAK,GAAL,GAAW,GAAG,MAAH,CAAU,KAAK,EAAf,EACR,MADQ,CACD,KADC,EAER,IAFQ,CAEH,OAFG,EAEM,KAFN,EAGR,IAHQ,CAGH,QAHG,EAGO,MAHP,CAAX;;AAKA,WAAG,IAAH,CAAQ,UAAR,EAAoB,KAAK,UAAzB;AACD;;;;;;;wBAEQ;AACP,eACE,0CAAK,WAAU,WAAf,GADF;AAGD;;;;;;EAlDe,mBAAM,S;;AAmDvB;;qBAEc,G","file":"/imports/ui/components/common/map.js.map","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as d3 from \"d3\";\r\nimport * as topojson from \"topojson\";\r\n\r\nclass Map extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.el = null;\r\n    this.width = 960;\r\n    this.height = 500;\r\n    this.loadStates = this.loadStates.bind(this);\r\n    this.projection = d3.geoAlbersUsa()\r\n      .translate([this.width / 2, this.height / 2])\r\n      .scale([1000]);\r\n    this.path = d3.geoPath()\r\n      .projection(this.projection);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initMap()\r\n  }\r\n\r\n  loadStates(error, us) {\r\n    if (error) throw error;\r\n\r\n    this.svg.insert(\"path\", \".buildings\")\r\n        .datum(topojson.feature(us, us.objects.land))\r\n        .attr(\"class\", \"land\")\r\n        .attr(\"d\", this.path);\r\n\r\n    this.svg.insert(\"path\", \".buildings\")\r\n        .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; }))\r\n        .attr(\"class\", \"state-boundary\")\r\n        .attr(\"d\", this.path);\r\n  }\r\n\r\n  initMap() {\r\n    const {width, height, projection, path} = this;\r\n    this.el = ReactDOM.findDOMNode(this);\r\n\r\n    //Create SVG element and append map to the SVG\r\n    this.svg = d3.select(this.el)\r\n      .append(\"svg\")\r\n      .attr(\"width\", width)\r\n      .attr(\"height\", height);\r\n\r\n    d3.json(\"/us.json\", this.loadStates);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"buildings\"></div>\r\n    )\r\n  }\r\n};\r\n\r\nexport default Map;\r\n"]},"hash":"347c3f9e6ddc98a019253b71a484e82d1d14b70f"}
